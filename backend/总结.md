**`mysql`**

* `mysq`l服务的关闭与启动（默认开机自动启动，如果想手动操作，可以参考如下命令）
* 关闭：`net stop mysql80`
* 启动：`net start mysql80`
* `mysql`的常用操作
* 连接用户名为`root`，密码为`123456`的数据库服务：`mysql -uroot -p123456`
* `show databases;`：列出所有数据库
* `create database kob;`：创建数据库
* `drop database kob;`：删除数据库
* `use kob;`：使用数据库`kob`
* `show tables;`：列出当前数据库的所有表
* `create table user(id int, username varchar(100))`：创建名称为`user`的表，表中包含`id`和`username`两个属性。
* `drop table user;`：删除表
* `insert into user values(1, 'yxc');`：在表中插入数据
* `select * from user;`：查询表中所有数据
* `delete from user where id = 2;`：删除某行数据

**`springboot`配置`mysql`**

* [`maven`仓库地址](https://mvnrepository.com/)：不用手动敲依赖，只需要搜索之后选择版本，复制添加就可以

* 在`idea`右边的数据库图形化界面可以访问数据库，配制好连接信息，下载驱动就可以
* `springboot`加依赖：
  *  `Spring Boot Starter JDBC`：`2.7.1` 
  *  `Project Lombok`（自动写`getter setter函数`）: `1.18.24`
  * `MySQL Connector/J`: `8.0.31`
  * `mybatis-plus-boot-starter`: `3.5.2`
  * `mybatis-plus-generator`(自动生成`mapper`): `3.5.3`
  * `spring-boot-starter-security`: ``
* 在`application.properties`中添加数据库配置：

```properties
spring.datasource.username=root
spring.datasource.password=123456
spring.datasource.url=jdbc:mysql://localhost:3306/kob?serverTimezone=Asia/Shanghai&useUnicode=true&characterEncoding=utf-8
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
```

* `SpringBoot`中的常用模块

  * `pojo`层：将数据库中的表对应成`Java`中的`Class`
  * `mapper`层（也叫`Dao`层）：将`pojo`层的`class`中的操作，映射成`sql`语句
  * `service`层：写具体的业务逻辑，组合使用`mapper`中的操作
  * `controller`层：负责请求转发，接受页面过来的参数，传给`Service`处理，接到返回值，再传给页面

* `pojo`层生成对应`user`:

  * 创建数据库的对应字段在类中（`int`最好用`Integer`不然`mybatis-plus`会报错）
  * 懒得写`getter setter`可以使用`Data`注解。无参构造函数和所有有参构造函数对应`@NoArgsConstructor @AllArgsConstructor`两个注解都来自`lombok`，可以去`target`中查看是否生成了对应的函数

* `mapper`层

  * 实现`sql`语句的编写，泛型中引入了`pojo`
  * 想要调用`Mapper`的时候需要定义一个`Mapper`对象，上面需要使用注解`@AutoWired`这样可以自动填充对象使用
  * 使用`Mapper`对应函数可以参考[Mybatis-plus](https://baomidou.com/pages/49cc81/#select)(`userMapper.selectList(null);`)

  ```java
  import com.baomidou.mybatisplus.core.mapper.BaseMapper;
  import com.kob.backend.pojo.User;
  import org.apache.ibatis.annotations.Mapper;
  
  @Mapper
  public interface UserMapper extends BaseMapper<User> {
  }
  ```

  * 还可以通过`wrapper`具体查询，如果返回的是多个那就是`selectList`单个就是`selectOne`

  ```java
      @GetMapping("/user/{userId}")
      public User getById(@PathVariable int userId){
          QueryWrapper<User> queryWrapper = new QueryWrapper<>();
          //eq是等于 le是小于等于 ge是大于等于 
          queryWrapper.eq("id",userId);
          return userMapper.selectOne(queryWrapper);
      }
  ```

  * 使用`wrapper`插入数据，一般使用`post`

  ```java
      @PostMapping("/user/add/{userId}/{username}/{password}")
      public String addUser(@PathVariable int userId,@PathVariable String username,@PathVariable String password){
          User user = new User(userId,username,password);
          userMapper.insert(user);
          return "Add success";
      }
  ```

  * 使用`wrapper`删除数据

  ```java
   @GetMapping("/user/delete/{userId}")
      public User deleteById(@PathVariable int userId){
          userMapper.deleteById(userId);
          return "Delete success";
      }
  ```

  * 

* `controller`层

  * `RequestMapping`会将所有类型的请求都接受（包括`post`,`get`），也可以使用`PostMapping`或者`GetMapping`分别接受对应请求
  * 如果需要函数获取传入的网址参数

  ```java
  @GetMapping("/user/select/{userId}")
      public List<User> getById(@PathVariable int userId){
          return userMapper.selectById(userId);
      }
  ```

  * 123

**`spring`**

* 权限判断（每个人访问页面权限）
  * 先集成`spring-boot-starter-security`：`2.7.1` 
  * 访问任何页面都需要登录，用户名一般默认`user`，密码每次启动在后台自动生成
  * `session cookie`：用户登录成功的话服务器会返回前端一个随机生成的字符串`sessionId`,并且存到`redis`中，前端就会存储到`cookie`中，然后前端每次发请求的时候后端就会对比前端`cookie`中的`seesionId`是否正确，不正确就是登录过期了
  * 如何将`security`对接数据库：不用每次都自己登录一遍





---



**报错总结**

* `mysql`命令行`show databases;`报错`ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'DATABASE`：`mysql`版本问题，需要用大写`SHOW DATABASES;`但是`sql`语句不用区分大小写。**遇见报错42000就把小写命令换成大写**
* `Plugin 'org.springframework.boot:spring-boot-maven-plugin:' not found`:含有两个版本号，添加一个版本号就好了
* 